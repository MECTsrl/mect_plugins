
<html>
	<head>
	  <meta http-equiv="content-type" content="text/html; charset=windows-1252"/>
	   <title>Diagnostic variabiles</title>
	   <style type="text/css">
		@page { size: 21.59cm 27.94cm; margin-right: 2cm; margin-top: 2.5cm; margin-bottom: 1.5cm }
		p { margin-bottom: 0.21cm; direction: ltr; color: #000000; orphans: 0; widows: 0 }
		p.western { font-family: "Arial", "Times New Roman", serif; font-size: 10pt; so-language: it-IT }
		h3.western { font-family: "Liberation Sans", "Arial", sans-serif; so-language: it-IT }
		a:link { color: #0000ff }
		a.cjk:visited { so-language: zh-CN }
	</style>
	</head>	
	<body>
		<h3 class="western">Diagnostic variabiles</h3>
	<p class="western">From row number 5000 of the crosstable there are diagnostic variables.</p>
	<p class="western">Fieldbuses: <strong>RTU0</strong>, <strong>RTU1</strong>, <strong>RTU3</strong>, <strong>CAN0</strong>, <strong>CAN1</strong>, <strong>TCPS</strong> (TCP_SRV), <strong>TCP0...TCP9</strong> (the first 10 TCP). 10 variables for each fieldbus: </p>
	<ul>
		<li>
		<p class="western"><strong>*_TYPE_PORT:</strong></p>
			<ul>
				<li>
				<p class="western">Lo : port number</p>
				<li>
				<p class="western">Hi : port type:</p>
					<ul>
					<li>
					<p class="western">0 = PLC;</p>
					<li>
					<p class="western">1 = RTU;</p>
					<li>
					<p class="western">2 = TCP;</p>
					<li>
					<p class="western">3 = TCPRTU;</p>
					<li>
					<p class="western">4 = CANOPEN;</p>
					<li>
					<p class="western">5 = MECT;</p>
					<li>
					<p class="western">6 = RTU_SRV;</p>
					<li>
					<p class="western">7 = TCP_SRV;</p>
					<li>
					<p class="western">8 = TCPRTU_SRV.</p>
					</ul>
			</ul>
		<li>
		<p class="western"><strong>*_BAUDRATE:</strong>  <u>baudrate</u> for RTU and CANopen protocol.  <u>IP Address</u> for TCP.</p>
		<li>
		<p class="western"><strong>*_STATUS:</strong></p>
			<ul>
				<li>
				<p class="western"><strong>Client:</strong></p>
					<ul>
						<li>
						<p class="western">0 = Not initialized;</p>
						<li>
						<p class="western">1 = Not connected;</p>
						<li>
						<p class="western">2 = Connected;</p>
						<li>
						<p class="western">3 = Connected with errors;</p>
						<li>
						<p class="western">4 = Blacklist device;</p>
						<li>
						<p class="western">5 = Error creating socket.</p>
					</ul>
				<li>
				<p class="western"><strong>Server:</strong></p>
					<ul>
						<li>
						<p class="western">0 = Initialization;</p>
						<li>
						<p class="western">1 = Connected;</p>
						<li>
						<p class="western">2 = Not initialized;</p>
						<li>
						<p class="western">3 = Listening;</p>
						<li>
						<p class="western">4 = Processing.</p>
					</ul>		
					<p class="western">Note: In working condition, the variable displays the "listening" status as the processes are very fast. It is advisable to create a "Life" counter variable.</p>
			</ul>
		<li>
		<p class="western"><strong>*_READS:</strong>; number of reads from the fieldbus.</p>
		<li>
		<p class="western"><strong>*_WRITES:</strong> number of writes to the fieldbus.</p>
		<li>
		<p class="western"><strong>*_TIMEOUT:</strong> number of timeout errors (i.e. no answers).</p>
		<li>
		<p class="western"><strong>*_COMM_ERRORS:</strong> number of communication errors (i.e. checksum errors and alike).</p>
		<li>
		<p class="western"><strong>*_LAST_ERROR:</strong> last error type:</p>
			<ul>
				<li>
				<p class="western">0 = No error;</p>
				<li>
				<p class="western">1 = Communication error;</p>
				<li>
				<p class="western">2 = Timeout error;</p>
				<li>
				<p class="western">3 = Connection reset.</p>
			</ul>
		<li>
		<p class="western"><strong>*_WRITE_QUEUE:</strong> number of queued writes to the fieldbus.</p>
		<li>
		<p class="western"><strong>*_BUS_LOAD:</strong> fieldbus load percentage (0 - 100%).</p>
	</ul>
	<br/>
	<p class="western">From row 5172 there are <strong>nodes</strong> diagnostic variables. 2 variables for each node:</p>
	<ul>
		<li>
		<p class="western"><strong>NODE_*_DEV_NODE:</strong></p>
			<ul>
				<li>
				<p class="western">Lo : node number (Node ID) in the Crosstable (starts from 1);</p>
				<li>
				<p class="western">Hi : device number (Protocol + IP Address + Port + Node ID) in the Crosstable (starts from 0).</p>
			</ul>
		<li>
		<p class="western"><strong>NODE_*_STATUS:</strong></p>
		<ul>
			<li>
			<p class="western">0 = No node;</p>
			<li>
			<p class="western">1 = Node OK;</p>
			<li>
			<p class="western">2 = Timeout;</p>
			<li>
			<p class="western">3 = Blacklist;</p>
			<li>
			<p class="western">4 = Not connected.</p>
			<li>
			<p class="western">5 = Disabled.</p>
			<p class="western">Enabling or disabling the node must be performed by HMI. </p>
				<ul>
					<li>
					<p class="western">Node disabled: doWrite_NODE_xx_STATUS(0)</p>
					<li>
					<p class="western">Nodo enabled: doWrite_NODE_xx_STATUS(1)</p>
				</ul>
		</ul>
</ul>	
	<br/>
	</body>
</html>