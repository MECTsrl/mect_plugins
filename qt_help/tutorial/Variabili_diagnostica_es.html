
<html>
	<head>
	  <meta http-equiv="content-type" content="text/html; charset=windows-1252"/>
	   <title>Variables de diagnóstico</title>
	   <style type="text/css">
		@page { size: 21.59cm 27.94cm; margin-right: 2cm; margin-top: 2.5cm; margin-bottom: 1.5cm }
		p { margin-bottom: 0.21cm; direction: ltr; color: #000000; orphans: 0; widows: 0 }
		p.western { font-family: "Arial", "Times New Roman", serif; font-size: 10pt; so-language: it-IT }
		h3.western { font-family: "Liberation Sans", "Arial", sans-serif; so-language: it-IT }
		a:link { color: #0000ff }
		a.cjk:visited { so-language: zh-CN }
	</style>
	</head>	
	<body>
		<h3 class="western">Variables de diagnóstico</h3>
	<p class="western">A partir de la línea 5000 de la Crosstable se encuentran las variables de diagnóstico.</p>
	<p class="western">Los buses de campo son: <strong>RTU0</strong>, <strong>RTU1</strong>, <strong>RTU3</strong>, <strong>CAN0</strong>, <strong>CAN1</strong>, <strong>TCPS</strong> (TCP_SRV), <strong>TCP0...TCP9</strong> (los primeros). Para cada bus de campo hay 10 variables: </p>
	<ul>
		<li>
		<p class="western"><strong>*_TYPE_PORT:</strong></p>
			<ul>
				<li>
				<p class="western">Lo : número de puerta</p>
				<li>
				<p class="western">Hi : tipo de puerta:</p>
					<ul>
					<li>
					<p class="western">0 = PLC;</p>
					<li>
					<p class="western">1 = RTU;</p>
					<li>
					<p class="western">2 = TCP;</p>
					<li>
					<p class="western">3 = TCPRTU;</p>
					<li>
					<p class="western">4 = CANOPEN;</p>
					<li>
					<p class="western">5 = MECT;</p>
					<li>
					<p class="western">6 = RTU_SRV;</p>
					<li>
					<p class="western">7 = TCP_SRV;</p>
					<li>
					<p class="western">8 = TCPRTU_SRV.</p>
					</ul>
			</ul>
		<li>
		<p class="western"><strong>*_BAUDRATE:</strong> indica la <u>velocidad en baudios</u> para los protocolos RTU y CANopen. Indica la <u>dirección IP</u> para TCP.</p>
		<li>
		<p class="western"><strong>*_STATUS:</strong></p>
			<ul>
				<li>
				<p class="western"><strong>Client:</strong></p>
					<ul>
						<li>
						<p class="western">0 = No inicializado;</p>
						<li>
						<p class="western">1 = No conectado;</p>
						<li>
						<p class="western">2 = conectado;</p>
						<li>
						<p class="western">3 = conectado con errores;</p>
						<li>
						<p class="western">4 = Dispositivo en lista negra;</p>
						<li>
						<p class="western">5 = Error en la creación del socket.</p>
					</ul>
				<li>
				<p class="western"><strong>Server:</strong></p>
					<ul>
						<li>
						<p class="western">0 = Inicialización;</p>
						<li>
						<p class="western">1 = Conectado;</p>
						<li>
						<p class="western">2 = No inicializado;</p>
						<li>
						<p class="western">3 = En espera;</p>
						<li>
						<p class="western">4 = En marcha (procesando).</p>
					</ul>		
					<p class="western">Nota: En condiciones de trabajo, la variable muestra el estado de "espera" ya que los procesos son muy rápidos. Es recomendable crear una variable de contador "Vida".</p>
			</ul>
		<li>
		<p class="western"><strong>*_READS:</strong>; numero di letture dal bus di campo.</p>
		<li>
		<p class="western"><strong>*_WRITES:</strong> Número de escrituras desde el bus de campo.</p>
		<li>
		<p class="western"><strong>*_TIMEOUT:</strong> Número de errores de tiempo de espera (sin respuesta).</p>
		<li>
		<p class="western"><strong>*_COMM_ERRORS:</strong> Número de errores de comunicación (checksums).</p>
		<li>
		<p class="western"><strong>*_LAST_ERROR:</strong> indica el tipo de último error:</p>
			<ul>
				<li>
				<p class="western">0 = Sin error;</p>
				<li>
				<p class="western">1 = Error de comunicación;</p>
				<li>
				<p class="western">2 = Error de tiempo de espera;</p>
				<li>
				<p class="western">3 = Error de restablecimiento de la conexión.</p>
			</ul>
		<li>
		<p class="western"><strong>*_WRITE_QUEUE:</strong> Número de escrituras en cola en el bus de campo.</p>
		<li>
		<p class="western"><strong>*_BUS_LOAD:</strong> porcentaje de carga del bus de campo (0 - 100%).</p>
	</ul>
	<br/>
	<p class="western">A partir de la línea 5172 se encuentran las variables de diagnóstico relacionadas con los <strong>nodos</strong>. Para cada nodo hay 2 variables:</p>
	<ul>
		<li>
		<p class="western"><strong>NODE_*_DEV_NODE:</strong></p>
			<ul>
				<li> 
				<p class="western">Lo : indica el número del nodo (ID de nodo)  dentro de la Crosstable (empezando por 1);</p>
				<li>
				<p class="western">Hi : indica el número de dispositivo (Protocolo + Dirección IP + Puerto + ID de nodo) dentro de la Crosstable (empezando por 0).</p>
			</ul>	
		<li>		
		<p class="western"><strong>NODE_*_STATUS:</strong></p>
			<ul>
				<li>
				<p class="western">0 = Sin nodo;</p>
				<li>
				<p class="western">1 = Nodo OK;</p>
				<li>
				<p class="western">2 = Tiempo de espera;</p>
				<li>
				<p class="western">3 = Lista negra;</p>
				<li>
				<p class="western">4 = No Conectado.</p>
				<li>
				<p class="western">5 = Nodo deshabilitado.</p>
				<p class="western">El nodo debe estar habilitado o deshabilitado por la HMI. </p>
				<ul>
					<li>
					<p class="western">Nodo deshabilitado: doWrite_NODE_xx_STATUS(0)</p>
					<li>
					<p class="western">Nodo habilitado: doWrite_NODE_xx_STATUS(1)</p>
				</ul>
			</ul>
	</ul>	
	<br/>
	</body>
</html>