
<html>
	<head>
	  <meta http-equiv="content-type" content="text/html; charset=windows-1252"/>
	   <title>Diagnosevariablen</title>
	   <style type="text/css">
		@page { size: 21.59cm 27.94cm; margin-right: 2cm; margin-top: 2.5cm; margin-bottom: 1.5cm }
		p { margin-bottom: 0.21cm; direction: ltr; color: #000000; orphans: 0; widows: 0 }
		p.western { font-family: "Arial", "Times New Roman", serif; font-size: 10pt; so-language: it-IT }
		h3.western { font-family: "Liberation Sans", "Arial", sans-serif; so-language: it-IT }
		a:link { color: #0000ff }
		a.cjk:visited { so-language: zh-CN }
	</style>
	</head>	
	<body>
		<h3 class="western">Diagnosevariablen</h3>
	<p class="western">Ab Zeile 5000 des Kreuztisches gibt es die Diagnosevariablen.</p>
	<p class="western">Die Feldbusse sind: <strong>RTU0</strong>, <strong>RTU1</strong>, <strong>RTU3</strong>, <strong>CAN0</strong>, <strong>CAN1</strong>, <strong>TCPS</strong> (TCP_SRV), <strong>TCP0...TCP9</strong> . (die ersten 10 TCP). Für jeden Feldbus gibt es 10 Variablen: </p>
	<ul>
		<li>
		<p class="western"><strong>*_TYPE_PORT:</strong></p>
			<ul>
				<li>
				<p class="western">Lo : Portnummer</p>
				<li>
				<p class="western">Hi : Türtyp:</p>
					<ul>
					<li>
					<p class="western">0 = PLC;</p>
					<li>
					<p class="western">1 = RTU;</p>
					<li>
					<p class="western">2 = TCP;</p>
					<li>
					<p class="western">3 = TCPRTU;</p>
					<li>
					<p class="western">4 = CANOPEN;</p>
					<li>
					<p class="western">5 = MECT;</p>
					<li>
					<p class="western">6 = RTU_SRV;</p>
					<li>
					<p class="western">7 = TCP_SRV;</p>
					<li>
					<p class="western">8 = TCPRTU_SRV.</p>
					</ul>
			</ul>
		<li>
		<p class="western"><strong>*_BAUDRATE:</strong> zeigt die <u>baudrate</u> für RTU- und CANopen-Protokolle an. Zeigt die <u>IP-Adresse</u> für TCP an.</p>
		<li>
		<p class="western"><strong>*_STATUS:</strong></p>
			<ul>
				<li>
				<p class="western"><strong>Client:</strong></p>
					<ul>
						<li>
						<p class="western">0 = Nicht initialisiert;</p>
						<li>
						<p class="western">1 = Nicht verbunden;</p>
						<li>
						<p class="western">2 = Verbunden;</p>
						<li>
						<p class="western">3 = Verbunden mit Fehlern;</p>
						<li>
						<p class="western">4 = Gerät in der Blacklist;</p>
						<li>
						<p class="western">5 = Fehler bei der Socket-Erstellungt.</p>
					</ul>
				<li>
				<p class="western"><strong>Server:</strong></p>
					<ul>
						<li>
						<p class="western">0 = Initialisierung;</p>
						<li>
						<p class="western">1 = Verbunden;</p>
						<li>
						<p class="western">2 = Nicht initialisiert;</p>
						<li>
						<p class="western">3 = Wartend;</p>
						<li>
						<p class="western">4 = Laufend (Verarbeitung).</p>
					</ul>		
					<p class="western">Hinweis: Im betriebsbereiten Zustand zeigt die Variable den Status "Warten" an, da die Prozesse sehr schnell sind. Es empfiehlt sich eine Zählervariable "Life" anzulegen.</p>
			</ul>
		<li>
		<p class="western"><strong>*_READS:</strong>; Anzahl der Messwerte vom Feldbus.</p>
		<li>
		<p class="western"><strong>*_WRITES:</strong> Anzahl der Schreibzugriffe vom Feldbus.</p>
		<li>
		<p class="western"><strong>*_TIMEOUT:</strong> Anzahl der Timeout-Fehler (keine Antwort).</p>
		<li>
		<p class="western"><strong>*_COMM_ERRORS:</strong> Anzahl der Kommunikationsfehler (checksum).</p>
		<li>
		<p class="western"><strong>*_LAST_ERROR:</strong> zeigt den Typ des letzten Fehlers an:</p>
			<ul>
				<li>
				<p class="western">0 = Kein Fehler;</p>
				<li>
				<p class="western">1 = Kommunikationsfehler;</p>
				<li>
				<p class="western">2 = Timeout-Fehler;</p>
				<li>
				<p class="western">3 = Fehler beim Zurücksetzen der Verbindung.</p>
			</ul>
		<li>
		<p class="western"><strong>*_WRITE_QUEUE:</strong> numero di scritture in coda nel bus di campo.</p>
		<li>
		<p class="western"><strong>*_BUS_LOAD:</strong> Feldbus-Lastprozentsatz (0 - 100%).</p>
	</ul>
	<br/>
	<p class="western">Ab Zeile 5172 gibt es die Diagnosevariablen, die sich auf die <strong>Knoten</strong> beziehen. Für jeden Knoten gibt es 2 Variablen:</p>
	<ul>
		<li>
		<p class="western"><strong>NODE_*_DEV_NODE:</strong></p>
			<ul>
				<li>
				<p class="western">Lo : gibt die Nummer des Knotens (Node ID) innerhalb des Crosstable an (beginnend bei 1);</p>
				<li>
				<p class="western">Hi : zeigt die Gerätenummer (Protokoll + IP-Adresse + Port + Node ID) innerhalb des Crosstable an (beginnend bei 0).</p>
			</ul>	
		<li>		
		<p class="western"><strong>NODE_*_STATUS:</strong></p>
			<ul>
				<li>
				<p class="western">0 = Keine Knoten;</p>
				<li>
				<p class="western">1 = Knoten OK;</p>
				<li>
				<p class="western">2 = Timeout;</p>
				<li>
				<p class="western">3 = Schwarze Liste;</p>
				<li>
				<p class="western">4 = Nicht verbunden.</p>
				<li>
				<p class="western">5 = Knoten deaktiviert.</p>
				<p class="western">Der Knoten muss über das HMI aktiviert oder deaktiviert werden. </p>
				<ul>
					<li>
					<p class="western">Knoten deaktiviert: doWrite_NODE_xx_STATUS(0)</p>
					<li>
					<p class="western">Knoten aktiviert: doWrite_NODE_xx_STATUS(1)</p>
				</ul>
			</ul>
	</ul>	
	<br/>
	</body>
</html>